# claude.md - Project Rules for dotfiles-manager

## Project Overview

**Type**: cli
**Goal**: A CLI tool to sync, backup, and manage dotfiles across multiple machines with support for profiles and encrypted secrets
**Language**: python

## Code Standards

### Style
- Follow PEP 8 conventions
- Use ruff for formatting
- Maximum line length: 100 characters

### Type Safety
- Use type hints on all functions
- No `any` types without explicit justification
- Document complex types with comments

### Testing
- Minimum test coverage: 85%
- Write tests before implementation (TDD encouraged)
- Use descriptive test names: `test_<function>_<scenario>_<expected>`

### Documentation
- All public functions must have docstrings
- Include usage examples in docstrings
- Keep README.md up to date

## Git Workflow

### Branching
- Branch from `main` for each task
- Format: `feature/<phase>-<task>-<description>`
- Example: `feature/1-2-symlink-manager`

### Commits
- Use semantic commit messages
- Format: `<type>: <description>`
- Types: feat, fix, refactor, test, docs, chore

### Pull Requests
- Squash merge to main
- Include task ID in PR title
- Ensure CI passes before merge

## Quality Gates

Before marking a task complete:
1. All tests pass
2. Linting passes with no warnings
3. Type checking passes
4. Code reviewed (self-review acceptable for solo dev)
5. Documentation updated if needed

## Project-Specific Rules

### Security
- NEVER commit unencrypted secrets
- Use `cryptography` library for all encryption
- AES-256-GCM for symmetric encryption
- Derive keys from passwords using PBKDF2 with 100k+ iterations

### File Operations
- Always confirm before overwriting existing files
- Create backups before destructive operations
- Use atomic writes where possible
- Handle symlink edge cases (broken links, circular refs)

### Cross-Platform
- Use `pathlib.Path` for all file paths
- Test on both macOS and Linux
- Handle different shell configs (.bashrc vs .zshrc vs .bash_profile)

---

*Generated by DevPlan MCP Server*
